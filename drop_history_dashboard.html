<!DOCTYPE html>
<html><head><meta charset='UTF-8'>
<title>Drop History Dashboard â€“ Bourbon Pourcast</title>
<meta name='viewport' content='width=device-width, initial-scale=1'/>

<style>
body {
  font-family: Arial, Helvetica, sans-serif;
  color: #111;
  line-height: 1.4;
  margin: 0;
  padding: 0 10px 20px 10px;
  background-color: #f7f7f7;
}
h1 { text-align: center; margin-top: 18px; }
.dashboard-shell {
  max-width: 1100px;
  margin: 0 auto;
  background: #fff;
  padding: 16px 18px 20px 18px;
  box-shadow: 0 0 8px rgba(0,0,0,0.06);
  border-radius: 8px;
}
.summary-row { display:flex; flex-wrap:wrap; gap:12px; margin-bottom:16px; }
.summary-card {
  flex: 1 1 160px;
  background: #faf5eb;
  border-radius: 8px;
  padding: 10px 12px;
  border: 1px solid #e0d2aa;
}
.summary-card h3 { margin: 0 0 4px 0; font-size: 14px; color:#555; }
.summary-card .value { font-size: 20px; font-weight:700; color:#8b5a1e; }
.filter-row { display:flex; flex-wrap:wrap; gap:10px; margin-bottom:12px; }
.filter-row label { font-size: 13px; color:#444; }
.filter-block { display:flex; flex-direction:column; min-width:150px; }
.filter-block input, .filter-block select { padding:4px 6px; font-size:13px; }
.table-shell { overflow-x:auto; }
table { width:100%; border-collapse:collapse; font-size:13px; background:#fff; }
thead { background:#f2e6c8; }
th, td { padding:6px 8px; border:1px solid #e0d2aa; }
th { text-align:left; font-weight:600; }
tr:nth-child(even) { background:#fdf8ef; }
tr.hide-row { display:none; }
.footer-note { margin-top:8px; font-size:12px; color:#777; text-align:center; }
@media (max-width: 640px) {
  .summary-row { flex-direction: column; }
  .filter-row { flex-direction: column; }
}
</style>

</head><body>
<h1>Drop History Dashboard</h1>
<div class='dashboard-shell'>

<div class="summary-row">
  <div class="summary-card">
    <h3>Total Logged Drops</h3>
    <div class="value" id="summaryTotalDrops">0</div>
  </div>
  <div class="summary-card">
    <h3>Unique Stores</h3>
    <div class="value" id="summaryUniqueStores">0</div>
  </div>
  <div class="summary-card">
    <h3>Unique Brands</h3>
    <div class="value" id="summaryUniqueBrands">0</div>
  </div>
  <div class="summary-card">
    <h3>Last Updated</h3>
    <div class="value" style="font-size:14px;">
      2026-01-12 08:51 ET
    </div>
  </div>
</div>


<div class="filter-row">
  <div class="filter-block">
    <label for="brandFilter">Filter by Brand</label>
    <input id="brandFilter" type="text" placeholder="e.g. Buffalo Trace">
  </div>
  <div class="filter-block">
    <label for="storeFilter">Filter by Store</label>
    <input id="storeFilter" type="text" placeholder="e.g. Village Walk Dr">
  </div>
  <div class="filter-block">
    <label for="weekdayFilter">Filter by Weekday</label>
    <select id="weekdayFilter">
      <option value="">(All days)</option>
      <option value='Monday'>Monday</option><option value='Tuesday'>Tuesday</option><option value='Wednesday'>Wednesday</option><option value='Thursday'>Thursday</option><option value='Friday'>Friday</option><option value='Saturday'>Saturday</option><option value='Sunday'>Sunday</option>
    </select>
  </div>
  <div class="filter-block">
    <label for="daysBackFilter">Show last N days (0 = all)</label>
    <input id="daysBackFilter" type="number" min="0" value="0">
  </div>
</div>


<div class="table-shell">
  <table id="historyTable">
    <thead>
      <tr>
        <th>Date</th>
        <th>Weekday</th>
        <th>Brand</th>
        <th>Store</th>
        <th style="text-align:right;">Qty</th>
      </tr>
    </thead>
    <tbody>

<tr><td colspan='5' style='text-align:center; padding:12px;'>No drop history available yet.</td></tr>

    </tbody>
  </table>
</div>
<div class="footer-note">
  Use the filters above to explore recent drops by brand, store, weekday, or date range.
</div>


<script>
(function() {
  const brandInput    = document.getElementById('brandFilter');
  const storeInput    = document.getElementById('storeFilter');
  const weekdaySelect = document.getElementById('weekdayFilter');
  const daysBackInput = document.getElementById('daysBackFilter');
  const tbody         = document.querySelector('#historyTable tbody');

  const summaryTotal  = document.getElementById('summaryTotalDrops');
  const summaryStores = document.getElementById('summaryUniqueStores');
  const summaryBrands = document.getElementById('summaryUniqueBrands');

  if (!tbody) return;

  const today = new Date();
  today.setHours(0,0,0,0);

  function matchesFilter(row) {
    const brandFilter   = (brandInput.value || "").toLowerCase();
    const storeFilter   = (storeInput.value || "").toLowerCase();
    const weekdayFilter = weekdaySelect.value || "";
    const daysBack      = parseInt(daysBackInput.value || "0", 10);

    const brand   = (row.getAttribute('data-brand') || "").toLowerCase();
    const store   = (row.getAttribute('data-store') || "").toLowerCase();
    const weekday = row.getAttribute('data-weekday') || "";
    const dateStr = row.getAttribute('data-date') || "";

    if (brandFilter && brand.indexOf(brandFilter) === -1) return false;
    if (storeFilter && store.indexOf(storeFilter) === -1) return false;
    if (weekdayFilter && weekday !== weekdayFilter) return false;

    if (daysBack > 0 && dateStr) {
      const d = new Date(dateStr + "T00:00:00");
      d.setHours(0,0,0,0);
      const diffMs   = today - d;
      const diffDays = diffMs / (1000 * 60 * 60 * 24);
      if (diffDays > daysBack) return false;
    }

    return true;
  }

  function applyFilters() {
    const rows = tbody.querySelectorAll('tr');

    let visibleCount = 0;
    const storeSet = new Set();
    const brandSet = new Set();

    rows.forEach(row => {
      if (matchesFilter(row)) {
        row.classList.remove('hide-row');
        visibleCount++;

        const s = (row.getAttribute('data-store') || "").trim();
        const b = (row.getAttribute('data-brand') || "").trim();
        if (s) storeSet.add(s);
        if (b) brandSet.add(b);
      } else {
        row.classList.add('hide-row');
      }
    });

    if (summaryTotal)  summaryTotal.textContent  = String(visibleCount);
    if (summaryStores) summaryStores.textContent = String(storeSet.size);
    if (summaryBrands) summaryBrands.textContent = String(brandSet.size);
  }

  brandInput.addEventListener('input', applyFilters);
  storeInput.addEventListener('input', applyFilters);
  weekdaySelect.addEventListener('change', applyFilters);
  daysBackInput.addEventListener('input', applyFilters);

  applyFilters();
})();
</script>

</div>
</body></html>